<template name="members">
  <div class="btns-wrapper m-t-20 m-r-30 clearfix">
    <button type="button" class="btn btn-complete btn-animated from-left fa fa-plus pull-right" id="add-member-btn">
      <span class="bold">{{_ "Add member"}}</span>
    </button>
    <button type="button" class="btn btn-primary btn-animated from-left fa fa-download pull-right m-r-10"
      id="import-members-btn">
      <span class="bold">{{_ "Import members"}}</span>
    </button>
  </div>
  <hr>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>{{_ "Name"}}</th>
          <th>{{_ "Username"}}</th>
          <th>{{_ "Address"}}</th>
          <th>{{_ "Pharmacy"}}</th>
          <th>{{_ "Actions"}}</th>
        </tr>
      </thead>
      <tbody>
        {{#if Template.subscriptionsReady}}
          {{#each members}}
            {{> member}}
          {{else}}
            <tr>
              <td colspan="5">There are no members to display.</td>
            </tr>
          {{/each}}
        {{else}}
          {{> loading}}
        {{/if}}
      </tbody>
    </table>
  </div>

  {{#if Template.subscriptionsReady}}
    {{> pagination}}
  {{/if}}
  {{> removeMemberModal}}
</template>

<template name="member">
  <tr>
    <td>
      <span class="bold">{{profile.name}}</span><br>
      {{#each emails}}
        <em>{{address}}</em><br>
      {{/each}}
    </td>
    <td>{{username}}</td>
    <td class="{{#unless validAddress}}invalid{{/unless}}">
      {{#with profile.address}}
        {{street}}<br>
        {{postalCode}} <span class="text-uppercase">{{city}}</span>
      {{/with}}
    </td>
    <td>{{profile.pharmacyName}}<br><span class="hint-text"><em>CIP</em>: {{profile.CIP}}</span></td>
    <td>
      <div class="btn-group">
        <button type="button" class="btn btn-warning edit-member-btn" data-original-title="{{_ 'Edit member'}}"
          data-toggle="tooltip" data-placement="bottom">
          <i class="fa fa-pencil"></i>
        </button>
        <button type="button" class="btn btn-danger remove-member-btn" data-original-title="{{_ 'Remove member'}}"
          data-tooltip-toggle="tooltip" data-placement="bottom"
          data-toggle="modal" data-target="#remove-member-modal">
          <i class="fa fa-trash"></i>
        </button>
      </div>
    </td>
  </tr>
</template>
